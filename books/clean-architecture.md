# Clean Architecture 達人に学ぶソフトウェアの構造と設計
> Robert C.Martin 著ほか. Clean Architecture : 達人に学ぶソフトウェアの構造と設計, ドワンゴ, 2018.7. 978-4-04-893065-9. https://ndlsearch.ndl.go.jp/books/R100000002-I029096886

Robert C.Martin = ボブおじさん

## Audiobook
2024年5月にaudiobook化して以来、数十回は繰り返し聞いているが、やはり聞いているだけでは理解できない点が多々ある。

## 読んだ箇所
- 第7章 SRP：単一責任の原則
- 第8章 OCP：オープンクローズドの原則
- 第9章 LSP：リスコフの置換原則
- 第10章 ISP：インターフェイス分離の原則
- 第11章 DIP：依存関係逆転の原則
- 第13章 コンポーネントの凝集性 - 再利用・リリース透過の原則（REP）、閉鎖性共通の原則（CCP）、全再利用の原則（CRP）
- 第14章 コンポーネントの結合 - 非循環依存関係の原則（ADP）、安定依存の原則（SDP）、安定度・抽象度等価の原則（SAP）
- 第15章 アーキテクチャとは？
- 第16章 独立性
- 第17章 バウンダリー：境界線を引く
- 第18章 境界の解剖学
- 第19章 方針とレベル
- 第20章 ビジネスルール
- 第21章 叫ぶアーキテクチャ
- 第22章 クリーンアーキテクチャ

## 雑感、メモ
### OCP
- OCPが活きるのは次のようなケースだと理解した
    - もともと種類がいくつか存在しており、その種類ごとに異なる処理を実行している状況において、新しい種類を追加するケース
- OCPに関連して読んだ記事
    - [開放閉鎖の原則 TypeScriptでSOLID原則](https://gntk.dev/post/20210916-learn-solid-principle-ocp/)
        - 丁寧な説明でわかりやすかった
    - [開放閉鎖原則\(open\-closed\-principle\)ってもはや意味ない \- きしだのHatena](https://nowokay.hatenablog.com/entry/2025/02/19/192438)
        - 意味ないことは無いと思うのだけど、ソフトウェア設計において、いかなるケースでも（何も考えずに）適用できる万能な設計原則なんて存在しないのでは？
        - この記事で参照しているメイヤーの定義とボブおじさんの定義は別物なのだろうか？
- 全然関係ないけど、[なかやまきんに君の下腹部＆くびれトレーニングの3種目目「45°レッグオープン＆クローズ」](https://www.youtube.com/watch?v=o5vb430_m38&t=136s)でOCPを思い出して、「拡張に対して開く」「修正に対して閉じる」と心の中で唱えながらやっている

### 第13章 コンポーネントの凝集性（REP、CCP、CRP）
- 関連して読んだ記事
    - [パッケージ設計６つの原則～ポイントは関連性/依存性/抽象度 \| プレイン・プログラム](https://plainprogram.com/package-principles/)

### 第18章 境界の解剖学
- 図18-2は「制御の流れ」が図に記載されていないので、わかりづらいと思った
- ファサード = facade : 建物の正面を意味する単語。GoFのデザインパターンに「Facade パターン」がある

### 第19章 方針とレベル
- レベル：入力と出力からの距離。離れているほどレベルが高い（上位レベル）
- 変更理由・変更時期・レベルの組が同じになるものは、同じコンポーネントにまとめる
- データフローとソースコードの依存性は同じ方向にならないこともある。ソースコードの依存性は、下位レベルのコンポーネントから上位レベルのコンポーネントを指す方向にする

### 第20章 ビジネスルール
- ビジネスルール：自動化されているかどうかに関係なく、お金を生んだり節約したりするルールのこと
- 最重要ビジネスルール：ビジネスにとって欠かせない、自動化されていなくても存在するビジネスルール
- 最重要ビジネスデータ：最重要ビジネスルールに必要なデータ
- エンティティ：最重要ビジネスデータを操作する最重要ビジネスルールをいくつか含んだもの。ビジネスにとって不可欠な概念を実装するソフトウェアをまとめたもの。
- ユースケース：自動化によってお金を生んだり節約したりする、アプリケーション固有のビジネスルールを実装したもの。入力・出力・処理を規定している。エンティティの最重要ビジネスルールの呼び出しに関するルールが含まれている
- エンティティ＝上位レベル、ユースケース＝下位レベル　→　ユースケースはエンティティに依存する

### 第22章 クリーンアーキテクチャ
- アーキテクチャはソフトウェアをレイヤーに分割することで関心事の分離を実現している
- 常に円の外側から内側へ依存するようにする

## 誤植？
- p.141 8行目：`こうしたライブラリのIの値は1になるが` → `こうしたライブラリのIの値は0になるが`
- p.141 26行目：`除外すべきソーンを回避する` → `除外すべきゾーンを回避する` ※ゾの濁点が抜けている

## 関連記事
- （公開日：2023/12/19、閲覧日：2025/06/24）[クリーンアーキテクチャの功罪](https://zenn.dev/adwd/articles/5d4a89262f4fc5)
    - あくまでWebフロントエンドのエンジニア目線での記事だった
